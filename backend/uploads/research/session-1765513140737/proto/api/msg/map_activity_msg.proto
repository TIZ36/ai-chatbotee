syntax = "proto3";
package msg;

import "enumx/csv_enumx.proto";
import "enumx/enumx.proto";
import "msg/msg.proto";
import "msg/battle_msg.proto";
import "optx/optx.proto";
import "third/github.com/go-proto-validators/validator.proto";
import "third/github.com/gogo/protobuf/gogoproto/gogo.proto";

option go_package = "verse/backend/pb";
option (gogoproto.goproto_getters_all) = false;

// 地图活动数据
//message MapActivityGroup {
//  option (optx.structuralVersion)        = 0;
//  uint32                       mapID     = 1[(optx.primaryKeyPriority) = 1];
//  repeated MapActivitySchedule schedules = 2; // 地图承接的活动数据
//}
//
//message MapActivitySchedule {
//  option (optx.structuralVersion)            = 0;
//  uint32               mapID             = 1[(optx.primaryKeyPriority) = 1];
//  uint32               scheduleID        = 2[(optx.primaryKeyPriority) = 2];
//  enumx.ActivityModule module            = 3; //
//  int64                scheduleStartTime = 4;
//  int64                scheduleEndTime   = 5;
//
//  // 各个活动状态数据
//  // map_activity_mgr_actor不管理这些数据，而是由map_activity_actor管理
//  HitAssemblyData       hitAssemblyData     = 100; // 狙击试炼
//  CityBossMAData        cityBossData        = 101; // 武装突袭（世界BOSS）
//  ArenaFirstSevenMAData arenaFirstSevenData = 102; // 演习场开服活动
//}

// 狙击试炼活动
message HitAssemblyData {
  bool            mapInit = 1; // 地图刷活动集结怪
  repeated uint64 objIDs  = 2; // 在地图上刷过的活动集结怪objID
}

message CityBossMAData {
  int64              bossRefreshTime  = 1; // 世界BOSS刷新时间（一般是00:00:00）
  enumx.CityBossType bossType         = 2; // 世界BOSS类型
  uint64             objID            = 3; // 世界BOSS的objID
  msg.IntPos         pos              = 4; // 世界BOSS的位置

  int64 previousBossDestroyTime = 5; // 昨日世界BOSS销毁时间（一般是新一天的00:00:00）
  int64 previousRewardSendTime  = 6; // 昨日奖励发放时间（一般是新一天的00:00:00）
}

// 演习场开服活动
message ArenaFirstSevenMAData {
  int64 rankRewardSendTime = 1; // 奖励发送时间
}

message WorldActivityGroup {
  option (optx.structuralVersion)            = 0;
  uint32                         worldID     = 1[(optx.primaryKeyPriority) = 1];
  repeated WorldActivitySchedule schedules   = 2; // 地图承接的活动数据
}

message WorldActivitySchedule {
  option (optx.structuralVersion)          = 0;
  uint32               worldID             = 1[(optx.primaryKeyPriority) = 1];
  uint32               scheduleID          = 2[(optx.primaryKeyPriority) = 2];
  enumx.ActivityModule module              = 3; //
  int64                scheduleStartTime   = 4;
  int64                scheduleEndTime     = 5;

  // 各个活动状态数据
  // activity_mgr_actor不管理这些数据，而是由activity_actor管理
  HitAssemblyData       hitAssemblyData     = 100; // 狙击试炼
  CityBossMAData        cityBossData        = 101; // 武装突袭（世界BOSS）
  ArenaFirstSevenMAData arenaFirstSevenData = 102; // 演习场开服活动
}