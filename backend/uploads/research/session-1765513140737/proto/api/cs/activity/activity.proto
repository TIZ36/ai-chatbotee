syntax = "proto3";
package activity;
import "msg/msg.proto";
import "enumx/csv_enumx.proto";
import "third/github.com/go-proto-validators/validator.proto";
import "third/github.com/gogo/protobuf/gogoproto/gogo.proto";

option go_package = "verse/backend/pb/pb_activity";
option (gogoproto.goproto_getters_all) = false;

//------------------------------------------------------------------------------------------
message Up_Union {
  oneof body {
    option (validator.oneof)  = {required: true};
    Up_Submit                submit                = 1;
    Up_SubmitTaskGroup       submitTaskGroup       = 2; // 提交任务组
    Up_ChangeBundleGroupId   changeBundleGroupId   = 3;      // 改变活动礼包组
    Up_SubmitMulti           submitMulti           = 4;
    Up_GetPointReward        getPointReward        = 5; // 获取积分奖励
    Up_GetPointAndTaskReward getPointAndTaskReward = 6; // 获取积分+任务奖励
    Up_SubmitOneSchedule     submitOneSchedule     = 7; // 一键领取单个schedule的所有module任务，再自动领取所有module积分奖励
  }
}

message Dn_Union {
  oneof body {
    Dn_Submit                submit                = 1;
    Dn_SubmitTaskGroup       submitTaskGroup       = 2; // 提交任务组
    Dn_ChangeBundleGroupId   changeBundleGroupId   = 3;      // 改变活动礼包组
    Dn_SubmitMulti           submitMulti           = 4;
    Dn_GetPointReward        getPointReward        = 5; // 获取积分奖励
    Dn_GetPointAndTaskReward getPointAndTaskReward = 6; // 获取积分+任务奖励
    Dn_SubmitOneSchedule     submitOneSchedule     = 7; // 一键领取单个schedule的所有module任务，再自动领取所有module积分奖励
  }
}

message Up_Submit {
  msg.ActivityKey      actKey  = 1[(gogoproto.nullable) = false]; // 活动唯一id
  enumx.ActivityModule module  = 2; // 模块
  repeated uint32      taskIDs = 3; // 任务id
}

message Dn_Submit {
  msg.ActivityKey           actKey  = 1[(gogoproto.nullable) = false]; // 活动唯一id
  enumx.ActivityModule      module  = 2; // 模块
  repeated msg.SubmitResult results = 3; // 提交结果
}

message Up_SubmitTaskGroup {
  msg.ActivityKey      actKey       = 1[(gogoproto.nullable) = false]; // 活动唯一id
  enumx.ActivityModule module       = 2; // 模块
  repeated uint32      taskGroupIDs = 3; // 任务组id
}

message Dn_SubmitTaskGroup {
  msg.ActivityKey                            actKey  = 1[(gogoproto.nullable) = false]; // 活动唯一id
  enumx.ActivityModule                       module  = 2; // 模块
  repeated msg.SubmitActivityTaskGroupReward results = 3; // 提交结果
}

message Up_ChangeBundleGroupId {
  msg.ActivityKey      actKey        = 1[(gogoproto.nullable) = false]; // 活动唯一id
  enumx.ActivityModule module        = 2;                               // 模块
  uint32               bundleGroupId = 3;                        // 礼包组id
}

message Dn_ChangeBundleGroupId {
  msg.ActivityKey      actKey              = 1[(gogoproto.nullable) = false]; // 活动唯一id
  enumx.ActivityModule module              = 2; // 模块
  uint32               deleteBundleGroupId = 3; //旧礼包组Id
  msg.GiftPackageGroup newBundleGroupData  = 4; //新礼包信息
}

message Up_SubmitMulti {
  repeated msg.ActivitySubmitTaskData activitySubmitTaskData = 1;
}

message Dn_SubmitMulti {
  repeated msg.SubmitResult results = 1; // 提交结果
}

message Up_GetPointReward {
  msg.ActivityKey      actKey    = 1[(gogoproto.nullable) = false]; // 活动唯一id
  enumx.ActivityModule module    = 2;                               // 模块
  repeated uint32      rewardIds = 3;                               // 奖励ids
}

message Dn_GetPointReward {
  msg.ActParticipationRecord recordNewInfo = 1; // 新活跃度和奖励信息
  msg.Reward                 rewards       = 2; // 所有奖励
}

message Up_GetPointAndTaskReward {
  repeated msg.ActivitySubmitPointAndTaskData activitySubmitPointAndTaskData = 1;
}

message Dn_GetPointAndTaskReward {
  repeated msg.SubmitPointResult recordNewInfo = 1; // 新活跃度和奖励信息
  repeated uint32                results       = 2; // 提交的任务
  msg.Reward                     rewards       = 3; // 所有奖励
}
message Up_SubmitOneSchedule{
  msg.ActivityKey actKey = 1[(gogoproto.nullable) = false]; // 活动唯一id
}
message Dn_SubmitOneSchedule{
  msg.Reward       rewards = 1;
  msg.ActivityData actData = 2;
}