syntax = "proto3";
package user_info;
import "msg/msg.proto";
import "enumx/enumx.proto";
import "third/github.com/go-proto-validators/validator.proto";
import "third/github.com/gogo/protobuf/gogoproto/gogo.proto";

option go_package = "verse/backend/pb/pb_user_info";
option (gogoproto.goproto_getters_all) = false;

//------------------------------------------------------------------------------------------
message Up_Union {
  oneof body {
    option (validator.oneof) = {required: true};
    Up_ChangeIcon       changeIcon       = 1; // 修改头像
    Up_ChangeIconFrame  changeIconFrame  = 2; // 修改头像框
    Up_ChangeName       changeName       = 3; // 修改昵称
    Up_SetFormationShow setFormationShow = 4; // 设置展示阵型
    Up_GetPlayerInfo    getPlayerInfo    = 5; // 获取玩家信息
    Up_QueryName        queryName        = 6;  // 查询玩家昵称
    Up_ChangeGender     changeGender     = 7; // 修改性别
    Up_MGetUserInfo     mGetUserInfo     = 8; // 批量获取玩家信息
  }
}

message Dn_Union {
  oneof body {
    Dn_ChangeIcon       changeIcon       = 1; // 修改头像
    Dn_ChangeIconFrame  changeIconFrame  = 2; // 修改头像框
    Dn_ChangeName       changeName       = 3; // 修改昵称
    Dn_SetFormationShow setFormationShow = 4; // 设置阵型
    Dn_GetPlayerInfo    getPlayerInfo    = 5; // 获取玩家信息
    msg.Empty           queryName        = 6; // 查询玩家昵称
    Dn_ChangeGender     changeGender     = 7; // 修改性别
    Dn_MGetUserInfo     mGetUserInfo     = 8; // 批量获取玩家信息
  }
}

message Up_ChangeIcon {
  string iconUrl = 1; // 头像URL
  uint32 iconId  = 2; // 头像ID
}

message Dn_ChangeIcon {
  string iconUrl = 1; // 头像URL
  uint32 iconId  = 2; // 头像ID
}

message Up_ChangeIconFrame {
  uint32 id = 1; // 头像框ID
}

message Dn_ChangeIconFrame {
  uint32 id = 1; // 头像框ID
}

message Up_ChangeName {
  string name = 1; // 昵称
}

message Dn_ChangeName {
  string name         = 1; // 昵称
  int64  lastModifyTs = 2; // 上次修改时间戳
}

message Up_SetFormationShow {
  repeated msg.Uint32KV cards = 1; // 展示卡片列表（key:位置1-5，value:卡牌id）
}

message Dn_SetFormationShow {
  repeated msg.Uint32KV cards = 1; // 展示卡片列表（key:位置1-5，value:卡牌id）
}

message Up_GetPlayerInfo {
  int64 uid = 1; // 玩家ID
}

message Dn_GetPlayerInfo {
  msg.PlayerShowInfo playerInfo = 1; // 玩家信息
}

message Up_QueryName {
  string name = 1; // 玩家昵称
}

message Up_ChangeGender {
  enumx.Gender gender = 1; // 性别
}

message Dn_ChangeGender {
  enumx.Gender gender       = 1; // 性别
  int64        lastModifyTs = 2; // 上次修改时间戳，秒
}

message Up_MGetUserInfo {
  repeated uint32 uids = 1; // 玩家ID列表
}

message Dn_MGetUserInfo {
  repeated msg.ShortPlayerShowInfo playerInfos = 1; // 玩家信息列表
}