syntax = "proto3";
package shome;
import "msg/msg.proto";
import "enumx/enumx.proto";
import "enumx/csv_enumx.proto";
import "third/github.com/go-proto-validators/validator.proto";
import "third/github.com/gogo/protobuf/gogoproto/gogo.proto";

option go_package = "verse/backend/pb/pb_shome";
option (gogoproto.goproto_getters_all) = false;

// shome 主城数据, 包括

//------------------------------------------------------------------------------------------
message Up_Union {
  oneof body {
    option (validator.oneof) = {required: true};
    Up_SBuildingUpgrade      buildingUpgrade     = 1;  //建筑升级
    Up_SBuildingFinish       buildingFinish      = 2;  //建筑自然完成，客户端判断时间结束后
    Up_SBuildingFinishNow    buildingFinishNow   = 3;  //建筑立即完成
    Up_SComponentUpgrade     componentUpgrade    = 4;  //组件升级
    Up_AddBuildingQueue      addBuildingQueue    = 5;  //增加建造队列
    Up_SpeedupBuildingQueue  speedupBuildingQueue = 6;  //建筑队列加速
    Up_CampBuildingTrain     campBuildingTrain   = 7;  //兵营训练
    Up_CampBuildingSpeedUp   campBuildingSpeedUp = 8;  //兵营加速
    Up_CampBuildingFinish    campBuildingFinish  = 9;  //兵营训练收菜
    Up_CampBuildingFinishNow campBuildingFinishNow = 10; //训练中的兵营立即完成
    Up_CampBuildingCancel    campBuildingCancel    = 11; //取消兵营训练
    msg.Empty                getWarehouseSupply   = 12; //领取仓库补给
    msg.Empty                getRichInviteReward   = 13; //领取丰盛的招待奖励
  }
}

message Dn_Union {
  oneof body {
    Dn_SBuildingUpgrade     buildingUpgrade        = 1;
    Dn_SBuildingFinish      buildingFinish         = 2;
    Dn_SBuildingFinishNow   buildingFinishNow      = 3;
    Dn_SComponentUpgrade    componentUpgrade       = 4;
    Dn_AddBuildingQueue     addBuildingQueue       = 5;
    Dn_SpeedupBuildingQueue      speedupBuildingQueue    = 6;  //建筑队列加速
    Dn_CampBuildingTrain        campBuildingTrain     = 7;
    Dn_CampBuildingSpeedUp      campBuildingSpeedUp   = 8;
    Dn_CampBuildingFinish       campBuildingFinish    = 9;
    Dn_CampBuildingFinishNow    campBuildingFinishNow = 10;
    Dn_CampBuildingCancel       campBuildingCancel    = 11;
    Dn_GetWarehouseSupply       getWarehouseSupply   = 12; //领取仓库补给
    Dn_GetRichInviteReward      getRichInviteReward   = 13; //领取丰盛的招待奖励
  }
}


//------------------------------------------------------------------------------------------

message Up_SBuildingUpgrade {
  uint32                  buildingID  = 1;    //建筑id
}

message Dn_SBuildingUpgrade {
  msg.BuildingQueue buildingQueue = 1;        //建筑队列数据
}

message Up_SBuildingFinish {
  uint32              buildingID  = 1;    //建筑id
}

message Dn_SBuildingFinish {
  msg.SBuilding     building      = 1;    //建筑数据
}

message Up_SBuildingFinishNow {
  uint32              buildingID    = 1;    //建筑id
  bool                isInQueue     = 2;    //是否在队列中
  uint32              costDiamond   = 3;    //消耗的钻石
}

message Dn_SBuildingFinishNow {
  msg.SBuilding     building      = 1;    //建筑数据
}

message Up_SComponentUpgrade {
  uint32 componentID    = 1;    //组件id
  uint32 targetLevel    = 2;    //组件目标等级
}

message Dn_SComponentUpgrade {
  msg.SBuildingComponent component = 1; //组件数据
}

message Up_AddBuildingQueue {
}

message Dn_AddBuildingQueue {
  repeated msg.BuildingQueue buildingQueues = 1;
}

message Up_SpeedupBuildingQueue{
  uint32      buildingID    = 1;    //建筑id
  repeated msg.UintKV items = 2[(gogoproto.nullable) = false]; // 加速道具列表
}

message Dn_SpeedupBuildingQueue{
  msg.BuildingQueue buildingQueue = 1;    //建筑队列数据
  msg.SBuilding     building      = 2;    //建筑数据
  msg.CostReward    costAndReward = 3;    //消耗和返还
}

message Up_CampBuildingTrain {
  uint32            buildingID      = 1; // 兵营id
  uint32            trainNum    = 2; // 训练数量
  uint32            targetTid   = 3; // 目标部队Id
  uint32            sourceTid   = 4; // 升级发原部队Id
  uint32            costDiamond = 5; // 立即完成上发消耗钻石数量
}

message Dn_CampBuildingTrain {
  msg.SBuilding building = 1;
  msg.CostReward costReward = 2; // 立即完成的消耗和返还
}

message Up_CampBuildingSpeedUp {
  uint32              buildingID = 1; // 兵营id
  repeated msg.UintKV items      = 2[(gogoproto.nullable) = false]; // 普通加速发道具列表
}

message Dn_CampBuildingSpeedUp {
  msg.SBuilding   building   = 1;
  msg.CostReward  costReward = 2;
}

message Up_CampBuildingFinish {
  uint32 buildingID = 1; // 兵营id
}

message Dn_CampBuildingFinish {
  msg.SBuilding building = 1;
  msg.Reward    reward   = 2; // 收到的兵
}

message Up_CampBuildingFinishNow {
  uint32            buildingID  = 1; // 兵营id
  uint32            costDiamond = 2; // 立即完成消耗钻石数量
}

message Dn_CampBuildingFinishNow {
  msg.SBuilding  building   = 1;
  msg.CostReward costReward = 2;
}

message Up_CampBuildingCancel {
  uint32 buildingID = 1; // 兵营id
}

message Dn_CampBuildingCancel {
  msg.SBuilding building = 1;
  msg.Reward    reward   = 2; // 取消的返还
}

message Dn_GetWarehouseSupply {
  msg.Reward reward = 1; // 领取的奖励
  msg.SBuilding building = 2;
}

message Dn_GetRichInviteReward {
  msg.Reward reward = 1; // 领取的奖励
}