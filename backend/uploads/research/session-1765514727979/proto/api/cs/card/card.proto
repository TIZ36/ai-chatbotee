syntax = "proto3";
package card;
import "msg/msg.proto";
import "third/github.com/go-proto-validators/validator.proto";
import "third/github.com/gogo/protobuf/gogoproto/gogo.proto";

option go_package = "verse/backend/pb/pb_card";
option (gogoproto.goproto_getters_all) = false;

//------------------------------------------------------------------------------------------
message Up_Union {
  oneof body {
    option (validator.oneof) = {required: true};
    Up_CardLevelUp         cardLevelUp         = 1;
    Up_CardStarUp          cardStarUp          = 2;
    Up_CardSkillLevelUp    cardSkillLevelUp    = 3;
    Up_CardFragmentConvert cardFragmentConvert = 4; // 兵卡碎片兑换
    // w3 ops
    Up_CardReset           cardReset           = 11;
    Up_CardAppointHero     cardAppointHero     = 12;
    Up_CardFragmentRecruit cardFragmentRecruit = 13;
    Up_SuperWeaponProduce  superWeaponProduce  = 14;
  }
}

message Dn_Union {
  oneof body {
      Dn_CardLevelUp         cardLevelUp         = 1;
      Dn_CardStarUp          cardStarUp          = 2;
      Dn_CardSkillLevelUp    cardSkillLevelUp    = 3;
      Dn_CardFragmentConvert cardFragmentConvert = 4; // 兵卡碎片兑换
      // w3 ops
      Dn_CardReset           cardReset           = 11;
      Dn_CardAppointHero     cardAppointHero     = 12;
      Dn_CardFragmentRecruit cardFragmentRecruit = 13;
      Dn_SuperWeaponProduce  superWeaponProduce  = 14;
  }
}

// 兵卡升级
message Up_CardLevelUp {
  uint32 cardID      = 1;
  uint32 targetLevel = 2; // 目标等级
}

message Dn_CardLevelUp {
  uint32         cardID     = 1;
  uint32         level      = 2;
  msg.CostReward costReward = 3;
}


// 兵卡升星
message Up_CardStarUp {
  uint32 cardID = 1;
}

message Dn_CardStarUp {
  uint32         cardID     = 1;
  uint32         star       = 2;
  msg.CostReward costReward = 3;
}

// 兵卡特性升级
message Up_CardSkillLevelUp {
  uint32 cardID     = 1;
  uint32 skillIndex = 2; // 技能索引（从0开始）
}

message Dn_CardSkillLevelUp {
  uint32 cardID         = 1;
  uint32 skillIndex     = 2; // 技能索引（从0开始）
  msg.CostReward costReward = 3;
}

// 兵卡碎片兑换
message Up_CardFragmentConvert {
  uint32 belongCardTid = 1; // 所属军官Tid
  uint32 fragmentCount = 2; // 兑换数量
}

message Dn_CardFragmentConvert {
  msg.CostReward costReward = 1;
}







// 兵卡任命军官
message Up_CardAppointHero {
  uint32 cardTid = 1;
  uint32 heroTid = 2;  // 武将tid，0表示取消
}

message Dn_CardAppointHero {
  uint32 cardTid = 1;
  uint32 heroTid = 2;
}

// 碎片招募兵卡
message Up_CardFragmentRecruit {
  uint32 fragmentTid = 1;
  uint32 cardTid     = 2;
}

message Dn_CardFragmentRecruit {
  uint32         fragmentTid = 1;
  uint32         cardTid     = 2;
  msg.CostReward costReward  = 3;
}

message Up_SuperWeaponProduce {
  uint32 tid = 1; // 超武id
}

message Dn_SuperWeaponProduce {
  msg.CostReward costReward = 1;
}


// 兵卡重置
message Up_CardReset {
  uint32 cardID = 1;
}

message Dn_CardReset {
  uint32         cardID     = 1;
  msg.CostReward costReward = 2;
}