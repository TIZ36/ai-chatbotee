---
alwaysApply: true
---

# 前端组件使用规范与UX风格指南

## 组件库架构

### 基础组件库位置
- **路径**: `src/components/ui/`
- **技术栈**: Radix UI + Tailwind CSS + CVA (Class Variance Authority)
- **设计系统**: shadcn/ui 风格，基于 GNOME 设计语言

### 已实现的基础组件
- `Button` - 按钮组件（primary, secondary, outline, ghost, destructive）
- `Input` - 输入框
- `Textarea` - 多行文本输入
- `Label` - 标签
- `Select` - 下拉选择
- `Checkbox` - 复选框
- `Switch` - 开关
- `Dialog` - 对话框/模态框
- `Toast` - 提示消息
- `DropdownMenu` - 下拉菜单
- `ScrollArea` - 滚动区域

### 布局组件（PageLayout.tsx）
- `PageLayout` - 页面布局容器
- `Card` - 卡片容器（支持 compact/default/relaxed 尺寸）
- `Section` - 区块容器
- `ListItem` - 列表项（GNOME 风格）
- `Badge` - 徽章/标签（default/success/warning/error/info）
- `EmptyState` - 空状态展示
- `Alert` - 提示框（info/success/warning/error）

### 抽象组件（新增）
- `IconButton` - 图标按钮组件（封装常用图标按钮模式）
- `ConfirmDialog` - 确认对话框组件（用于删除/危险操作确认）
- `LoadingSpinner` / `LoadingOverlay` - 加载指示器组件
- `FormField` - 表单字段组件（InputField, TextareaField, FormFieldGroup）
- `DataListItem` - 数据列表项组件（封装常用列表项展示模式）

## 核心使用规范

### 1. 按钮使用规范

**✅ 必须使用 `Button` 组件，禁止使用原生 `<button>`**

```tsx
import { Button } from '@/components/ui/Button';
import { IconButton } from '@/components/ui/IconButton';
import { Plus } from 'lucide-react';

// ✅ 正确 - 普通按钮
<Button variant="primary" size="default" onClick={handleClick}>
  保存
</Button>

// ✅ 正确 - 图标按钮
<IconButton icon={Plus} onClick={handleAdd} label="添加" />

// ❌ 错误 - 禁止使用原生 button
<button className="btn-primary" onClick={handleClick}>保存</button>
```

**按钮变体（variant）**:
- `primary` - 主要操作（保存、提交、确认）
- `secondary` - 次要操作（取消、返回）
- `outline` - 边框按钮（中性操作）
- `ghost` - 无背景按钮（图标按钮、工具栏）
- `destructive` - 危险操作（删除、重置）

**按钮尺寸（size）**:
- `sm` - 小尺寸（h-8, px-2.5, text-xs）
- `default` - 默认尺寸（h-9, px-3, text-sm）
- `lg` - 大尺寸（h-10, px-4, text-sm）
- `icon` - 图标按钮（h-8 w-8）

### 2. 确认对话框使用规范

**✅ 必须使用 `ConfirmDialog` 组件进行删除/危险操作确认**

```tsx
import { ConfirmDialog } from '@/components/ui/ConfirmDialog';

<ConfirmDialog
  open={showDeleteDialog}
  onOpenChange={setShowDeleteDialog}
  title="删除确认"
  description="确定要删除这个项目吗？此操作不可撤销。"
  variant="destructive"
  onConfirm={handleDelete}
/>
```

### 3. 表单字段使用规范

**✅ 使用 `FormField` 组件封装表单字段**

```tsx
import { InputField, TextareaField, FormFieldGroup } from '@/components/ui/FormField';

<FormFieldGroup spacing="default">
  <InputField
    label="名称"
    required
    error={errors.name}
    inputProps={{
      id: "name",
      value: name,
      onChange: (e) => setName(e.target.value),
    }}
  />
  <TextareaField
    label="描述"
    hint="请输入详细描述"
    textareaProps={{
      id: "description",
      value: description,
      onChange: (e) => setDescription(e.target.value),
    }}
  />
</FormFieldGroup>
```

### 4. 列表项使用规范

**✅ 使用 `DataListItem` 组件展示数据列表**

```tsx
import { DataListItem } from '@/components/ui/DataListItem';

<DataListItem
  id={item.id}
  title={item.name}
  description={item.description}
  avatar={item.avatar}
  isSelected={selectedId === item.id}
  onClick={() => handleSelect(item.id)}
  onDelete={(e) => handleDelete(e, item.id)}
  onEdit={(e) => handleEdit(e, item.id)}
/>
```

### 5. 对话框使用规范

**✅ 必须使用 `Dialog` 组件**

```tsx
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from '@/components/ui/Dialog';

<Dialog open={isOpen} onOpenChange={setIsOpen}>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>对话框标题</DialogTitle>
      <DialogDescription>对话框描述</DialogDescription>
    </DialogHeader>
    <div>{/* 对话框内容 */}</div>
    <DialogFooter>
      <Button variant="secondary" onClick={() => setIsOpen(false)}>
        取消
      </Button>
      <Button variant="primary" onClick={handleConfirm}>
        确认
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### 6. 提示消息使用规范

**✅ 使用 `toast` hook**

```tsx
import { toast } from '@/components/ui/use-toast';

toast({
  title: '操作成功',
  description: '配置已保存',
  variant: 'success',
});
```

## UX 风格偏好

### 颜色系统
- **主色**: Indigo-600 (#4f46e5) - 用于主要操作和强调
- **成功色**: Green-500 (#22c55e) - 用于成功状态
- **警告色**: Yellow-500 (#f59e0b) - 用于警告状态
- **错误色**: Red-500 (#ef4444) - 用于错误状态

### 间距系统
- **页面内边距**: p-4 或 p-5（PageLayout content）
- **卡片内边距**: p-3 (compact) / p-4 (default) / p-5 (relaxed)
- **表单字段间距**: space-y-4（默认）或 space-y-3（紧凑）
- **按钮间距**: gap-2（DialogFooter）或 gap-3（工具栏）

### 圆角系统
- **按钮**: rounded-md (6px)
- **输入框**: rounded-md (6px)
- **对话框**: rounded-md

## 禁止使用的模式

### ❌ 禁止使用原生 HTML 元素替代组件
- 禁止使用 `<button>`，必须使用 `Button` 或 `IconButton` 组件
- 禁止使用原生 `<input>`，必须使用 `Input` 组件
- 禁止使用原生 `<select>`，必须使用 `Select` 组件

### ❌ 禁止使用内联样式类名
- 禁止使用 `btn-primary`, `btn-secondary` 等自定义类名
- 禁止直接使用 Tailwind 工具类构建按钮样式
- 必须通过组件的 `variant` 和 `size` props 控制样式

### ❌ 禁止重复实现已有组件
- 禁止创建新的按钮、输入框、对话框组件
- 禁止复制粘贴组件代码到其他文件
- 必须从 `@/components/ui/` 导入使用

## 组件抽象原则

### 何时使用抽象组件
1. **IconButton** - 所有图标按钮场景
2. **ConfirmDialog** - 所有删除/危险操作确认场景
3. **FormField** - 所有表单字段场景（Label + Input/Textarea + 错误提示）
4. **DataListItem** - 所有数据列表项场景（头像 + 标题 + 描述 + 操作按钮）
5. **LoadingSpinner** - 所有加载状态场景

### 组件设计原则
1. **单一职责** - 每个组件只负责一个功能
2. **数据驱动** - 组件通过 props 接收数据，不包含业务逻辑
3. **可组合** - 小组件可以组合成大组件
4. **类型安全** - 使用 TypeScript 严格类型定义

## 总结

1. **统一使用组件库** - 所有 UI 元素必须使用 `src/components/ui/` 中的组件
2. **优先使用抽象组件** - 对于重复模式，使用抽象组件（IconButton、ConfirmDialog、FormField、DataListItem）
3. **禁止原生元素** - 禁止使用原生 HTML 元素替代组件
4. **类型安全** - 使用 TypeScript 严格类型定义
5. **一致性优先** - 保持 UI 风格和交互的一致性
