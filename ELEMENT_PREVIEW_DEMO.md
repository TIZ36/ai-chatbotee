# 📄 元素预览功能演示

## 功能概述

**元素预览**功能让您在标记元素后**立即看到**会提取到的内容，无需等待后端处理。

## 视觉演示

### 步骤 1: 标记 Item

```
┌──────────────────────────────────────────────────────────┐
│  🔍 标记模式已激活                                        │
│  • 当前标记类型：数据项（列表项外层容器）                  │
│  • 鼠标悬停会显示 [蓝色边框]                              │
│  • 点击元素完成标记，或点击"取消标记"退出                  │
└──────────────────────────────────────────────────────────┘

         ↓ 点击页面中的一个元素 ↓

┌──────────────────────────────────────────────────────────┐
│  <div class="v-card">                                     │
│    担任雅思写作考官                                        │
│    我希望你假定自己是雅思写作考官，根据雅思评判标准，       │
│    按我给你的雅思考题和对应答案给我评分...                 │
│  </div>                                                   │
└──────────────────────────────────────────────────────────┘
```

### 步骤 2: 立即看到预览

标记成功后，会显示：

```
┌──────────────────────────────────────────────────────────┐
│  ✅ 已标记的选择器                                         │
│                                                           │
│  数据项：.v-card                                     [X]  │
│                                                           │
│  ┌────────────────────────────────────────────────────┐  │
│  │ 📄 元素文本预览（简化模式将提取这些内容）：  87 字符 │  │
│  ├────────────────────────────────────────────────────┤  │
│  │ 担任雅思写作考官                                   │  │
│  │ 我希望你假定自己是雅思写作考官，根据雅思评判       │  │
│  │ 标准，按我给你的雅思考题和对应答案给我评分，并     │  │
│  │ 且按照雅思...                                      │  │
│  │ (更多内容已省略)                                   │  │
│  └────────────────────────────────────────────────────┘  │
│                                                           │
│  ▼ 查看 HTML 结构                                         │
│                                                           │
│  🚀 简化模式已启用 - 将自动提取上方预览的完整文本内容      │
└──────────────────────────────────────────────────────────┘
```

### 步骤 3: 展开 HTML 结构（可选）

点击"查看 HTML 结构"：

```
┌──────────────────────────────────────────────────────────┐
│  ▲ 查看 HTML 结构                                         │
│                                                           │
│  <div class="v-card">                                     │
│    <div class="v-card-title">                             │
│      <span class="d-inline">担任雅思写作考官</span>        │
│    </div>                                                 │
│    <div class="v-card-text">                              │
│      <p>我希望你假定自己是雅思写作考官，根据雅思评判       │
│      标准，按我给你的雅思考题和对应答案给我评分...</p>     │
│    </div>                                                 │
│  </div>                                                   │
│  ...                                                      │
└──────────────────────────────────────────────────────────┘
```

## 实际使用场景

### 场景 1: 验证选择器正确性

**问题：** 不确定选中的元素是否包含完整内容

**解决：** 查看元素预览，确认文本内容完整

```
❌ 错误的选择：只选了标题
📄 元素文本预览：担任雅思写作考官 (7 字符)

✅ 正确的选择：选了整个卡片
📄 元素文本预览：担任雅思写作考官
我希望你假定自己是雅思写作考官，根据雅思评判标准... (87 字符)
```

### 场景 2: 简化模式实时确认

**问题：** 不确定简化模式会提取什么内容

**解决：** 元素预览直接显示会提取的文本

```
数据项：.article-item [X]

📄 元素文本预览（简化模式将提取这些内容）：     156 字符
┌────────────────────────────────────────┐
│ 如何使用 Python 进行数据分析             │
│                                        │
│ Python 是一种强大的编程语言，特别适合    │
│ 用于数据分析。本文将介绍基本的数据分析   │
│ 工具和技巧...                           │
└────────────────────────────────────────┘

🚀 简化模式已启用 - 将自动提取上方预览的完整文本内容

✅ 确认：这就是我想要的内容！
```

### 场景 3: 对比不同选择器

标记 Item A：
```
数据项：.v-card [X]
📄 元素文本预览：担任雅思写作考官... (87 字符)
```

删除，重新标记 Item B：
```
数据项：.article-container [X]
📄 元素文本预览：担任雅思写作考官
我希望你假定自己是雅思写作考官...
相关标签：教育 考试 雅思... (142 字符)

✅ 更完整！使用这个选择器
```

## 技术细节

### 文本提取过程

```typescript
// 1. 获取元素的所有文本
const elementText = element.textContent || '';

// 2. 清理文本（移除多余空白）
const cleanText = elementText
  .split('\n')
  .map(line => line.trim())
  .filter(line => line.length > 0)
  .join('\n');

// 3. 显示预览
显示前 500 字符 + 字符统计
```

### HTML 提取过程

```typescript
// 获取元素的完整 HTML（包括标签）
const elementHtml = element.outerHTML;

// 显示前 600 字符
显示在可展开的 details 元素中
```

## 优势总结

| 特性 | 传统方式 | 元素预览 |
|------|---------|----------|
| 查看提取内容 | ❌ 需要等待后端处理 | ✅ 立即显示 |
| 验证选择器 | ❌ 保存后才知道对不对 | ✅ 标记时就能确认 |
| 调试效率 | ❌ 反复测试很慢 | ✅ 即时反馈 |
| 用户体验 | ❌ 黑盒操作 | ✅ 所见即所得 |

## 控制台日志

标记时，控制台会输出：

```javascript
[标记系统] 生成选择器: {
  type: "item",
  selector: ".v-card",
  element: {
    tagName: "DIV",
    className: "v-card",
    id: "",
    textLength: 87,
    textPreview: "担任雅思写作考官\n我希望你假定自己是雅思写作考官，根据雅思评判标准，按我给你的雅思考题和对应答案给我评分，并且按照雅思..."
  }
}

[标记系统] ✅ 数据项标记成功！选择器: .v-card, 文本长度: 87
[标记系统] 触发预览，新选择器集合: { item: ".v-card" }
```

## 下一步

现在您可以：
1. ✅ 标记元素立即看到预览
2. ✅ 确认内容完整性
3. ✅ 验证简化模式工作正常
4. ✅ 点击"生成并保存解析数据"保存

**提示：** 如果预览内容不符合预期，点击选择器旁边的 [X] 清除，重新标记另一个元素！
